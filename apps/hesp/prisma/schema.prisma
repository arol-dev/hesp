generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int             @id @default(autoincrement())
  firstName     String
  lastName      String
  role          UserRole        @default(STAFF)
  email         String          @unique
  password      String
  // Comment       Comment[]
  PDCcheckpoint PDCcheckpoint[]
  Trainee       Trainee[]
  WOLcheckpoint WOLcheckpoint[]
}

// model Comment {
//   id            Int            @id @default(autoincrement())
//   message       String
//   relatedUser   Int
//   User          User           @relation(fields: [relatedUser], references: [id])
//   WOLcheckpoint WOLcheckpoint?
// }

model WOLcheckpoint {
  id                         Int    @id @default(autoincrement())
  health                     Int
  healthFeel                 String
  healthImprove              String
  work                       Int
  workFeel                   String
  workImprove                String
  finances                   Int
  financesthFeel             String
  financesthImprove          String
  environment                Int
  environmentFeel            String
  environmentImprove         String
  love                       Int
  loveFeel                   String
  loveImprove                String
  familyFriends              Int
  familyFriendsFeel          String
  familyFriendsImprove       String
  personalDevelopment        Int
  personalDevelopmentFeel    String
  personalDevelopmentImprove String
  fun                        Int
  funFeel                    String
  funImprove                 String
  // relatedUser                Int?
  // commentID           Int?     @unique
  // Comment             Comment? @relation(fields: [commentID], references: [id])
   userId             Int?
   user               User?          @relation(fields: [userId], references: [id])
}

model PDCcheckpoint {
  id                 Int            @id @default(autoincrement())
  trust              Int
  willFollow         Int
  retention          Int
  commitment         Int
  cv                 Int
  readyForInterviews Int
  advancement        Int
  userId             Int?
  user               User?          @relation(fields: [userId], references: [id])
  SessionNotes       SessionNotes[]
}

model SessionNotes {
  id            BigInt         @unique
  topic         String
  objective     String
  actions       String
  notes         String
  results       String
  evaluation    String
  checkpointId  Int?
  PDCcheckpoint PDCcheckpoint? @relation(fields: [checkpointId], references: [id])
}

model Trainee {
  id                 Int                  @id @default(autoincrement())
  firstName          String
  lastName           String
  email              String?
  phone              String?
  registerNumber     String?
  role               UserRole             @default(TRAINEE)
  userId             Int?
  ProvidedSoloutions ProvidedSoloutions[]
  User               User?                @relation(fields: [userId], references: [id])
  TraineeMetaData    TraineeMetaData?
}

model TraineeMetaData {
  traineeId           Int              @id @default(autoincrement())
  workingSituation    WorkingSituation
  housingSituation    HousingSituation
  needWork            Boolean
  needTraining        Boolean
  needHousing         Boolean
  needCommunication   Boolean
  needLegal           Boolean
  needTransportation  Boolean
  needBasicAssistance Boolean
  needSOS             Boolean
  helpCandidate       Boolean
  filledForms         Boolean
  helpAccepted        Boolean
  trainee             Trainee          @relation(fields: [traineeId], references: [id])
}

model ProvidedSoloutions {
  id         Int          @id @default(autoincrement())
  code       String
  traineeId  Int?
  Trainee    Trainee?     @relation(fields: [traineeId], references: [id])
  Soloutions Soloutions[]
}

model Soloutions {
  id                 Int                 @id @default(autoincrement())
  code               String
  providedID         Int?
  ProvidedSoloutions ProvidedSoloutions? @relation(fields: [providedID], references: [id])
}

model InviteLink {
  id        Int      @id @default(autoincrement())
  code      String
  used      Boolean  @default(false)
  expiresAt DateTime
}

enum UserRole {
  ADMIN
  STAFF
  TRAINEE
}

enum WorkingSituation {
  WORKING
  NOT_WORKING
}

enum HousingSituation {
  HOMELESS
  HOUSE
  APARTMENT
  OTHER
}
